<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>All Pokémon</title>

    <!-- Länkar till extern CSS-fil -->
    <link rel="stylesheet" href="{{ url_for('static', filename='all.css') }}">

    <style>
        /* Fast placerad stäng-knapp ("X") uppe i högra hörnet */
        .close-button {
            position: fixed;
            top: 16px;
            right: 16px;
            background-color: #f87171;
            color: #fff;
            font-family: 'Press Start 2P';
            font-size: 12px;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 0 10px #f87171;
            transition: all 0.2s ease-in-out;
        }

        .close-button:hover {
            background-color: #ef4444;
            box-shadow: 0 0 16px #f87171;
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- Sidhuvud -->
        <h1>All Pokémon</h1>

        <!-- Tillbaka-knapp (kors) som leder tillbaka till startsidan -->
        <a href="/">
            <button class="close-button">X</button>
        </a>

        <!-- Filtreringsformulär: Användaren kan filtrera på höjd, vikt och attack -->
        <form method="POST" class="filter-form">
            <input type="number" name="min_height" placeholder="Min Height (dm)" min="0">
            <input type="number" name="max_weight" placeholder="Max Weight (hg)" min="0">
            <input type="number" name="min_attack" placeholder="Min Attack" min="0">
            <button type="submit">Apply Filter</button>
        </form>

        <!-- Grid med alla Pokémon-kort som visas dynamiskt -->
        <div id="pokemonGrid" class="grid">
            {% for p in pokemon_list %}
                <div class="card" data-name="{{ p.name | lower }}">
                    <img src="{{ p.img }}" alt="{{ p.name }}">
                    <p class="poke-name">{{ p.name }}</p>
                    <p class="poke-info">Height: {{ p.height }} dm</p>
                    <p class="poke-info">Weight: {{ p.weight }} hg</p>
                    <p class="poke-info">Attack: {{ p.attack }}</p>

                    <!-- Formulär som låter användaren visa detaljerad information för en specifik Pokémon -->
                    <form method="POST" action="/">
                        <input type="hidden" name="pokemon_name" value="{{ p.name }}">
                        <button type="submit">Details</button>
                    </form>
                </div>
            {% endfor %}
        </div>

        <!-- Alternativ länk tillbaka till huvudsidan längst ned på sidan -->
        <p style="margin-top: 30px;"><a href="/">← Back</a></p>
    </div>

    <!-- JavaScript-funktionalitet: realtidsfiltrering baserat på namn -->
    <script>
        // Hämta sökfältet om det finns (kan vara från annan layout)
        const input = document.getElementById("searchInput");
        const cards = document.querySelectorAll(".card");

        // Filtrera korten baserat på inmatat namn i realtid
        if (input) {
            input.addEventListener("input", () => {
                const val = input.value.toLowerCase();
                cards.forEach(card => {
                    const name = card.getAttribute("data-name");
                    card.style.display = name.includes(val) ? "block" : "none";
                });
            });
        }
    </script>
</body>
</html>
